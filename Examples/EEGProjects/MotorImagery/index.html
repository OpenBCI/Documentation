<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.13">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="OpenBCI Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="OpenBCI Documentation Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="OpenBCI Documentation" href="/opensearch.xml">
<script src="https://buttons.github.io/buttons.js"></script><title data-react-helmet="true">Motor Imagery | OpenBCI Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://openbci.github.io/Documentation/img/UC-production-1140x424.jpg"><meta data-react-helmet="true" name="twitter:image" content="https://openbci.github.io/Documentation/img/UC-production-1140x424.jpg"><meta data-react-helmet="true" property="og:url" content="https://openbci.github.io/Examples/EEGProjects/MotorImagery/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="thumbnail" content="https://docs.openbci.com/img/openbci-logo-web.png"><meta data-react-helmet="true" property="og:title" content="Motor Imagery | OpenBCI Documentation"><meta data-react-helmet="true" name="description" content="This tutorial was made by Rakesh C Jakati."><meta data-react-helmet="true" property="og:description" content="This tutorial was made by Rakesh C Jakati."><link data-react-helmet="true" rel="icon" href="/img/favicon_large.ico"><link data-react-helmet="true" rel="canonical" href="https://openbci.github.io/Examples/EEGProjects/MotorImagery/"><link data-react-helmet="true" rel="alternate" href="https://openbci.github.io/Examples/EEGProjects/MotorImagery/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://openbci.github.io/Examples/EEGProjects/MotorImagery/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.c3a6c2ae.css">
<link rel="preload" href="/assets/js/runtime~main.9b4e100d.js" as="script">
<link rel="preload" href="/assets/js/main.96b93574.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/open-bci-gear.svg" alt="OpenBCI Documentation" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/open-bci-gear.svg" alt="OpenBCI Documentation" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">OpenBCI Documentation</b></a></div><div class="navbar__items navbar__items--right"><a href="https://openbci.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Main Site<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://shop.openbci.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Shop<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://openbci.com/forum/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Documentation</a><a href="https://github.com/OpenBCI" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a class="navbar__item navbar__link" href="/citations/">Citations</a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">üåú</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">üåû</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_Utm0"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/">Welcome to OpenBCI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/GettingStarted/GettingStartedLanding/">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/Cyton/CytonLanding/">Cyton Board</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/Ganglion/GanglionLanding/">Ganglion Board</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/AddOns/AddOnLanding/">Headwear &amp; Electrodes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/ThirdParty/ThirdPartyLanding/">Third-Party Hardware</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/Software/SoftwareLanding/">Software</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/ForDevelopers/ForDevelopersLanding/">For Developers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/Deprecated/DeprecatedLanding/">Deprecated Documents</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/Troubleshooting/TroubleshootingLanding/">Troubleshooting</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/Examples/ExamplesLanding/">Example Projects</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Examples/ExamplesLanding/">Example Projects</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/Examples/VideoExperiment/">Experiments</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/Examples/CommunityPageProjects/">Community Page Projects</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/Examples/EMGProjects/EMGscrolling/">EMG Projects and Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" tabindex="0" href="/Examples/EEGProjects/FocusArduino/">EEG Projects and Tutorials</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Examples/EEGProjects/FocusArduino/">Send Focus Data from GUI to Arduino</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Examples/EEGProjects/MotorImagery/">Motor Imagery</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/FAQ/FAQLanding/">FAQ</a></div></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Motor Imagery</h1></header><p>This tutorial was made by Rakesh C Jakati.</p><p>Motor imagery (MI)‚Äìbased brain-computer interface (BCI) is one of the standard concepts of BCI, in that the user can generate induced activity from the motor cortex by imagining motor movements without any limb movement or external stimulus.
In this tutorial, we will learn how to use OpenBCI equipment for motor imagery. For that, we will design a BCI system that allows a user to control a system by imagining different movements of their limbs. </p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="materials-required">Materials Required<a aria-hidden="true" class="hash-link" href="#materials-required" title="Direct link to heading">‚Äã</a></h2><ol><li>OpenBCI <a href="https://shop.openbci.com/collections/frontpage/products/cyton-biosensing-board-8-channel?variant=38958638542" target="_blank" rel="noopener noreferrer">Cyton Board</a></li><li><a href="https://shop.openbci.com/collections/frontpage/products/ultracortex-mark-iv" target="_blank" rel="noopener noreferrer">Ultracortex EEG headset</a> or <a href="https://shop.openbci.com/collections/frontpage/products/openbci-eeg-electrocap-kit" target="_blank" rel="noopener noreferrer">EEG cap</a></li><li><a href="https://www.mouser.com/ProductDetail/Espressif-Systems/ESP32-DevKitC-32D?qs=%252BEew9%252B0nqrDsObWEpDx6YQ%3D%3D&amp;mgh=1&amp;gclid=Cj0KCQiAv6yCBhCLARIsABqJTjYSYNAq2huvV-lF7V7lKuONcge-Uw2UY4cy9z42E52fUWGZIaLCYzEaAoEyEALw_wcB" target="_blank" rel="noopener noreferrer">NodeMCU</a> </li><li>NodeMCU constructed <a href="https://www.instructables.com/NodeMCU-ESP8266-WiFi-Robot-Car-Controlled-by-Appli/" target="_blank" rel="noopener noreferrer">car</a></li><li>Computer with installed with <a href="https://www.neuropype.io/#editions" target="_blank" rel="noopener noreferrer">NeuroPype</a></li><li>Computer with installed <!-- -->[OpenBCI GUI]<!-- --> <!-- -->(<!-- -->https:)</li><li>Computer with installed <a href="https://www.arduino.cc/en/software" target="_blank" rel="noopener noreferrer">Arduino IDE</a></li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="hardware-setup">Hardware Setup<a aria-hidden="true" class="hash-link" href="#hardware-setup" title="Direct link to heading">‚Äã</a></h2><p>If you are using the assembled Ultracortex IV, all you need to do is place the spiky electrodes on the following 10-20 locations: C3 ,Cz, C4, P3, Pz, P4, O1, O2 and FPz. If you want to assemble the headset yourself follow this tutorial.
Next, connect the electrodes to the Cyton board pins as shown on the table below.</p><p><img alt="Electrode Chart" src="/assets/images/Electrode_Chart-c414db6eaae4ba7e4431d6538999e970.png"></p><p><img alt="Electrode placement for Motor Imagery" src="/assets/images/electrode_placement-34b61bcd1d0a87bced722dc571c8028b.png"></p><p>You can either use the EEG Electrode Cap or the Ultracortex Mark IV headset. This demonstration uses a <a href="https://shop.openbci.com/collections/frontpage/products/openbci-eeg-electrocap" target="_blank" rel="noopener noreferrer">dedicated EEG cap</a>.</p><p><img alt="Using a Brain Product Easy Cap for Data Acquisition" src="/assets/images/EEG_Cap-9d7d81509006fed58175f45a5c62ada7.png"></p><header><h1>Software Setup</h1></header><p>Let us design a two-class BCI using the software NeuroPype. NeuroPype is free for academic users and you can get a 30 day trial if you are an individual/startup. You can get started with NeuroPype by clicking <a href="https://www.neuropype.io/" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="imagined-moments-classification">Imagined Moments Classification<a aria-hidden="true" class="hash-link" href="#imagined-moments-classification" title="Direct link to heading">‚Äã</a></h3><p>To start open the Neuropype Pipeline Designer application. Go to file and open Simple Motor Imagery Prediction with CSP. We will use the example provided by Neuropype software.</p><p><img alt="Branch Layout" src="/assets/images/Neuropype_Branch_Layout-55c5044b4627f14a35dc6241099f4ef0.png"></p><p>This pipeline uses EEG to predict whether you‚Äôre currently imagining one of the possible limb movements (default: left-hand movement vs. right-hand movement for two-class classification). The output of this pipeline at any tick is the probability that the person imagines each type of movement. Since the EEG patterns associated with these movements look different for any two people, several nodes (here: Common Spatial Patterns and Logistic Regression) must first adapt themselves based on some calibration data for the particular user. Moreover, it‚Äôs not enough for the calibration data to be arbitrary EEG data, it must meet certain criteria (this same rule applies to pretty much any use of machine learning on EEG data). First, the node needs to obtain examples of EEG left-hand movement and right-hand movement, respectively. Also, a single trial per class of movement is not enough,  the node needs to see close to 20‚Äì50 repeats when using a full-sized EEG headset. Lastly, these trials must be in a randomized order, i.e., not simply a block of all-left trials followed by a block of all-right trials. Collecting data in that way is one of the most common beginner mistakes with machine learning on time series, and it is important to avoid it.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="working-with-eeg-markers">Working with EEG Markers<a aria-hidden="true" class="hash-link" href="#working-with-eeg-markers" title="Direct link to heading">‚Äã</a></h3><p><img alt="Assign Targets Node" src="/assets/images/Assign_Target_Node-b988dcbaf5b12d4f6f1f55e7a4d54624.png"></p><p>For the aforementioned reasons, the EEG signal must be annotated such that one can tell which data points correspond to Class 1 (subject imagines left-hand movement) and which ones correspond to Class 2 (subject imagines right-hand movement). One way to do this is to include a special ‚Äòtrigger channel‚Äô in the EEG, which takes on pre-defined signal levels that encode different classes (e.g. 0=left, 1=right). In that case, the pipeline assumes that the data packets emitted by the LSL Input node are not just one EEG stream, but also a second stream that has a list of marker strings along with their timestamps (markers), i.e., they are multi-stream packets and there are consequently two data streams flowing through the entire pipeline. The markers are then interpreted by the rest of the pipeline to indicate the points in time around which the EEG is of a particular class (in this pipeline, a marker with the string ‚Äòleft‚Äô and time-stamp 17.5 would indicate that the EEG at 17.5 seconds into the recording is of class 0, and if the marker had been ‚Äòright‚Äô it would indicate class 1).
Of course, the data could contain any amount of other random markers (e.g., ‚Äòrecording-started‚Äô, ‚Äòuser-was-sneezing‚Äô, ‚Äòenter-pressed‚Äô), so how does the pipeline know what markers encode classes, and which classes they encode? This binding is established by the Assign Targets node. The settings are shown below. The syntax means that ‚Äòleft‚Äô strings map to class 0, ‚Äòright‚Äô maps to class 1, and all other strings don‚Äôt map to anything.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="segmentation">Segmentation<a aria-hidden="true" class="hash-link" href="#segmentation" title="Direct link to heading">‚Äã</a></h3><p><img alt="Segmentation Node" src="/assets/images/Segmentation_Node-a569e31068003d3489851cd1a7aabe58.png"></p><p>The second question is, given that there‚Äôs a marker at 17.5 seconds, how does the pipeline know where relative to that point in time we find the relevant pattern in the EEG that captures the imagined movement? Does it start a second before the marker and end a second after, or does it start at the marker and end 10 seconds later? Extracting the right portion of the data is usually handled by the Segmentation node, which extracts segments of a certain length relative to each marker. The picture above shows the settings for this pipeline, which are interpreted as follows: extract a segment that starts at 0.5 seconds after each marker and ends at 3.5 seconds after that marker (i.e., the segment is 3 seconds long). If you use negative numbers, you can place the segment before the marker.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="acquition-of-eeg-data-and-markers">Acquition of EEG Data and Markers<a aria-hidden="true" class="hash-link" href="#acquition-of-eeg-data-and-markers" title="Direct link to heading">‚Äã</a></h3><p>Plug in the RFduino dongle, connect electrodes to the cyton board pins. Wear the EEG headset and finally connect the ear clip to SRB. Open the OpenBCI GUI, select the appropriate port number and start streaming data from the Cyton board. Go to the networking tab and select the LSL protocol. Select ‚ÄúTIME-SERIES‚Äù data type and start streaming.</p><p><img alt="Hardware setting in the GUI" src="/assets/images/Hardware_Setting_in_the_GUI-46b1a8bc92315680c00306ab64f2f7fa.png"></p><p><img alt="The OpenBCI GUI" src="/assets/images/The_OpenBCI_GUI-e672676fefaab72a872dbc4d71289ccf.png"></p><p>Before we start classifying the Motor Imagery data, we need to calibrate the system.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="recording-calibration-data">Recording Calibration Data<a aria-hidden="true" class="hash-link" href="#recording-calibration-data" title="Direct link to heading">‚Äã</a></h3><p>The NeuroPype pipeline is doing a great job, but wouldn‚Äôt it be nice if we didn‚Äôt have to recollect the calibration data each time we run the pipeline? It‚Äôs often more convenient to record calibration data into a file in the first session, and load that file every time we run our pipeline. For this, we need to use the Inject Calibration Data node, which has a second input port where one can pipe a calibration recording (which we import here using Import XDF).
Start the Lab recorder and find the OpenBCI EEG stream in the window. Now run the python script motorimg_calibrate.py found in the extras folder in your Neuropype installation folder. Now update the streams in the lab recorder. You should now see MotorImag-Markers and obci_eeg1 stream along with your computer name.</p><p><img alt="Lab Recorder" src="/assets/images/Lab_Recorder-1108bb1fd52d5614965c075b8c78b998.png"></p><p>The python script along with OpenBCI, lab recorder is used to record calibration data. The script sends markers matching what the person is imagining that is &#x27;Left&#x27; or &#x27;Right&#x27; and instructs the user when to imagine that movement which will be stored in the .xdf file along with the EEG data.
Run the python script and start recording the OpenBCI stream and markers stream using the lab recorder. Follow the instructions shown on the window: when the window shows ‚ÄòR‚Äô‚Ää imagine moving your right arm, and when it shows ‚ÄòL‚Äô‚Ää‚Ää imagine moving your left arm. ‚ÄäIt takes about half a second for a person to read the instruction and begin imagining the movement, and he/she will finish about 3 seconds later and get ready for the next trial. This is why the segment time limits in the segmentation node are set to (0.5,3.5).
You can configure the number of trials per class and other parameters in motorimg_calibrate.py. </p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="import-calibration-data">Import Calibration Data<a aria-hidden="true" class="hash-link" href="#import-calibration-data" title="Direct link to heading">‚Äã</a></h3><p>You need to edit a few nodes in this pipeline. You should delete these three nodes (Import SET, Stream Data, LSL Output) at the bottom of the pipeline design as we will use our own recorded calibration data.</p><p><img alt="Calibration Data" src="/assets/images/Calibration_Data-b6a5ad00f3389256d844e85fa412a867.png">
Delete these nodes from the Pipeline Design</p><p>Delete the Import Set node that is connected to Inject Calibration Data and replace it with Import XDF as the calibration data is recorded in .xdf format.</p><p><img alt="Import XDF" src="/assets/images/Import_XDF-fa202ca311d219f70204b2cc55e737c9.png"></p><p>Replace the Import Set with Import XDF</p><p>Enter the calibration data filename
Fill in the appropriate filename of the XDF file in the window.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="picking-up-marker-streams-with-lsl">Picking up Marker Streams with LSL<a aria-hidden="true" class="hash-link" href="#picking-up-marker-streams-with-lsl" title="Direct link to heading">‚Äã</a></h3><p><img alt="LSL Input" src="/assets/images/LSL_Input-ddbe636482b9e26440398aa107ae15e5.png"></p><p>The LSL Input node is responsible for returning a marker stream together with the EEG. Enter the name of the OpenBCI stream in the query and after you import the .xdf calibration data, you are ready to go.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="streaming-the-data">Streaming the Data<a aria-hidden="true" class="hash-link" href="#streaming-the-data" title="Direct link to heading">‚Äã</a></h3><p><img alt="OSC Output" src="/assets/images/OSC_Output-4e00481c344bc04a958f3bef0bed5f20.png"></p><p>Connect an OSC (Open sound control) Output node to the Logistic Regression node in the pipeline designer and configure it as shown below before you stream the data.</p><p><img alt="OSC Number_Output" src="/assets/images/OSC_Number_Output-5408bf688c773bea0cc53d61de500fbe.png"></p><p>OSC(Open Sound Control) output
Type in the IP address of the device to which you want to stream the data, which can be either an Arduino or a Raspberry Pi). Use 127.0.0.1 as an IP address if you want to receive the data on your local computer.
<a href="https://github.com/OpenBCI/OpenBCI_Tutorials/tree/master/Motor_Imagery" target="_blank" rel="noopener noreferrer">Here</a> is a python code to receive the streamed data on the local computer.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="running-neuropype-pipeline">Running NeuroPype Pipeline<a aria-hidden="true" class="hash-link" href="#running-neuropype-pipeline" title="Direct link to heading">‚Äã</a></h3><p><img alt="NeuroPype Icon" src="/assets/images/Neuropype_Icon-b476af1f6472c81e95af8c3d660b6d65.png"></p><p>We are in the final stage of the Motor Imagery Classification pipeline design. Now right click on the NeuroPype icon in the taskbar and click run pipeline. Navigate to your file path and select your edited pipeline simplemotorimagery.pyp and run it. If everything is configured properly, you will get two windows showing the Classification and Misclassification Rate. You can now see real-time predictions of either left or right on the windows. Imagine moving your right arm to increase the amplitude power of the right prediction and imagine moving your left arm to increase the amplitude power of the left prediction.</p><p><img alt="Classification Icon" src="/assets/images/Classification-bc753efa312cada3555962a4eeabbec9.png"></p><p>When you run the python script on your local computer, you should receive the prediction data as shown below.</p><p><img alt="OSC output from python script" src="/assets/images/OSC_Python_output-182e82b6b8ebea55722d4710a5d8a955.png"></p><p>The car above uses NodeMCU and L298N motor driver. The NodeMCU coded in <a href="https://www.arduino.cc/en/software" target="_blank" rel="noopener noreferrer">Arduino IDE</a> and the <a href="https://github.com/OpenBCI/OpenBCI_Tutorials/tree/master/Motor_Imagery" target="_blank" rel="noopener noreferrer">code</a> is mentioned below. To learn how to use NodeMCU click <a href="https://create.arduino.cc/projecthub/auggujarat/getting-started-with-nodemcu-esp8266-on-arduino-ide-b7e18e" target="_blank" rel="noopener noreferrer">here</a>.</p><p>This OSC protocol is widely used in fields like musical expression, robotics, video performance interfaces, distributed music systems, and inter-process communication. You can use it to drive motors, activate devices, and much more. This example video uses the OSC output to control the direction of rotation of the car.
Following this tutorial, you will be able to design your own Motor Imagery Classification with your own calibration data and control cars, drones, and devices.
Start using BCI technologies to bring products of your imagination to life - there is no limit to what you can imagine!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/OpenBCI/Documentation/edit/master/website/docs/Examples/EEGProjects/20-Motor_Imagery.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2021-07-27T17:06:14.000Z">7/27/2021</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Examples/EEGProjects/FocusArduino/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ <!-- -->Send Focus Data from GUI to Arduino</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/FAQ/FAQLanding/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Frequently Asked Questions<!-- --> ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#materials-required" class="table-of-contents__link toc-highlight">Materials Required</a></li><li><a href="#hardware-setup" class="table-of-contents__link toc-highlight">Hardware Setup</a><ul><li><a href="#imagined-moments-classification" class="table-of-contents__link toc-highlight">Imagined Moments Classification</a></li><li><a href="#working-with-eeg-markers" class="table-of-contents__link toc-highlight">Working with EEG Markers</a></li><li><a href="#segmentation" class="table-of-contents__link toc-highlight">Segmentation</a></li><li><a href="#acquition-of-eeg-data-and-markers" class="table-of-contents__link toc-highlight">Acquition of EEG Data and Markers</a></li><li><a href="#recording-calibration-data" class="table-of-contents__link toc-highlight">Recording Calibration Data</a></li><li><a href="#import-calibration-data" class="table-of-contents__link toc-highlight">Import Calibration Data</a></li><li><a href="#picking-up-marker-streams-with-lsl" class="table-of-contents__link toc-highlight">Picking up Marker Streams with LSL</a></li><li><a href="#streaming-the-data" class="table-of-contents__link toc-highlight">Streaming the Data</a></li><li><a href="#running-neuropype-pipeline" class="table-of-contents__link toc-highlight">Running NeuroPype Pipeline</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/open-bci-gear-blue.svg" alt="" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="/img/open-bci-gear-blue.svg" alt="" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></div><div class="footer__copyright">Copyright ¬© 2021 OpenBCI</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9b4e100d.js"></script>
<script src="/assets/js/main.96b93574.js"></script>
</body>
</html>