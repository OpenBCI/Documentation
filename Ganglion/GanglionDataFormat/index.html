<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="OpenBCI Documentation Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="OpenBCI Documentation Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-42419007-3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-42419007-3",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="OpenBCI Documentation" href="/opensearch.xml">
<script src="https://buttons.github.io/buttons.js"></script><title data-react-helmet="true">Ganglion Data Format | OpenBCI Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://openbci.github.io/Ganglion/GanglionDataFormat/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="thumbnail" content="https://docs.openbci.com/img/openbci-logo-web.png"><meta data-react-helmet="true" property="og:title" content="Ganglion Data Format | OpenBCI Documentation"><meta data-react-helmet="true" name="description" content="This discussion of the OpenBCI data format only applies to the OpenBCI Ganglion. The Ganglion contains a Simblee microcontroller that can both be programmed through the Arduino IDE or over-the-air (OTA). The Simblee has an on-board radio module. The format of the Ganglion data as seen on the PC is defined by a combination of the Arduino code on the Ganglion board and software on your computer. So, if you don&#x27;t like the data format defined here, feel free to change it! In general, and believe us, we tried, you can&#x27;t send more then 100 BLE packets per second. For more info on the byte stream parsing on the computer side, or for a working example, see the NodeJS Ganglion Driver."><meta data-react-helmet="true" property="og:description" content="This discussion of the OpenBCI data format only applies to the OpenBCI Ganglion. The Ganglion contains a Simblee microcontroller that can both be programmed through the Arduino IDE or over-the-air (OTA). The Simblee has an on-board radio module. The format of the Ganglion data as seen on the PC is defined by a combination of the Arduino code on the Ganglion board and software on your computer. So, if you don&#x27;t like the data format defined here, feel free to change it! In general, and believe us, we tried, you can&#x27;t send more then 100 BLE packets per second. For more info on the byte stream parsing on the computer side, or for a working example, see the NodeJS Ganglion Driver."><meta data-react-helmet="true" property="og:image" content="https://openbci.github.io/Documentation/img/UC-production-1140x424.jpg"><meta data-react-helmet="true" name="twitter:image" content="https://openbci.github.io/Documentation/img/UC-production-1140x424.jpg"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon_large.ico"><link data-react-helmet="true" rel="canonical" href="https://openbci.github.io/Ganglion/GanglionDataFormat/"><link data-react-helmet="true" rel="alternate" href="https://openbci.github.io/Ganglion/GanglionDataFormat/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://openbci.github.io/Ganglion/GanglionDataFormat/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.81fc36e7.css">
<link rel="preload" href="/assets/js/runtime~main.9670d3ec.js" as="script">
<link rel="preload" href="/assets/js/main.494a30fe.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/open-bci-gear.svg" alt="OpenBCI Documentation" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/open-bci-gear.svg" alt="OpenBCI Documentation" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">OpenBCI Documentation</b></a></div><div class="navbar__items navbar__items--right"><a href="https://openbci.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Main Site<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://shop.openbci.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Shop<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://openbci.com/forum/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Documentation</a><a href="https://github.com/OpenBCI" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a class="navbar__item navbar__link" href="/citations/">Citations</a><div class="react-toggle displayOnlyInLargeViewport_cxYs react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_NKBi"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/open-bci-gear.svg" alt="OpenBCI Documentation" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/open-bci-gear.svg" alt="OpenBCI Documentation" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">OpenBCI Documentation</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://openbci.com" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Main Site<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://shop.openbci.com" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Shop<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://openbci.com/forum/" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/">Documentation</a></li><li class="menu__list-item"><a href="https://github.com/OpenBCI" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a class="menu__link" href="/citations/">Citations</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_lDyR"><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu menu--responsive thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_iZzd" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Welcome to OpenBCI</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/">Welcome to the OpenBCI Community</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/GettingStarted/GettingStartedLanding/">Getting Started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Boards</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/GettingStarted/Boards/CytonGS/">Cyton Getting Started Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/GettingStarted/Boards/DaisyGS/">Daisy Getting Started Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/GettingStarted/Boards/GanglionGS/">Ganglion Getting Started Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/GettingStarted/Boards/WiFiGS/">WiFi Shield Getting Started Guide</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Biosensing Setups</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/GettingStarted/Biosensing-Setups/EEGSetup/">Setting up for EEG</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/GettingStarted/Biosensing-Setups/ECGSetup/">Setting up for ECG</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/GettingStarted/Biosensing-Setups/EMGSetup/">Setting up for EMG</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/GettingStarted/Biosensing-Setups/ExGSetup/">Setting up for EEG, EMG, and ECG at the same time</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Community</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/GettingStarted/Community/Community/">Welcome to the OpenBCI Community</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Cyton Board</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Cyton/CytonLanding/">Cyton Board</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Cyton/CytonSpecs/">Cyton Specs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Cyton/CytonDataFormat/">Cyton Data Format</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Cyton/CytonSDK/">Cyton Board SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Cyton/CytonProgram/">Cyton Board Programming Tutorial</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Cyton/CytonRadios/">Cyton Radios Programming Tutorial</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Cyton/CytonExternal/">External Trigger on OpenBCI Cyton Board</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Cyton/CytonSDCard/">Using SD Card with OpenBCI</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Ganglion Board</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Ganglion/GanglionLanding/">Ganglion Board</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Ganglion/GanglionSpecs/">Ganglion Specs</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/Ganglion/GanglionDataFormat/">Ganglion Data Format</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Ganglion/GanglionSDK/">Ganglion SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Ganglion/GanglionProgram/">Ganglion Programming Tutorial</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Headwear &amp; Electrodes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/AddOns/AddOnLanding/">Add Ons</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Headwear</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/AddOns/Headwear/MarkIV/">Ultracortex Mark IV</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/AddOns/Headwear/HeadBand/">OpenBCI EEG Headband Kit Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/AddOns/Headwear/ElectrodeCap/">Electrode Cap Getting Started Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/AddOns/Headwear/GelfreeElectrodeCap/">Gelfree Electrode Cap Guide</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Electrodes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/AddOns/Electrodes/ElectrodesLanding/">Electrode Guide</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Third-Party Hardware</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ThirdParty/ThirdPartyLanding/">Third-Party Hardware</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">EmotiBit</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ThirdParty/EmotiBit/EmotiBit_Guide/">EmotiBit Guide</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">IDUN Dryode</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ThirdParty/IDUN_Dryode/Dryode/">IDUN Dryode</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Myoware</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ThirdParty/Myoware/MyoCyton/">MyoWare OpenBCI Integration (Cyton Board)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ThirdParty/Myoware/MyoGanglion/">MyoWare OpenBCI Integration (Ganglion Board)</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Pulse Sensor</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ThirdParty/Pulse_Sensor/Pulse_Sensor_Landing/">Pulse Sensor Guide</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">ThinkPulse</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ThirdParty/ThinkPulse/ThinkPulse/">ThinkPulse Getting Started Guide</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">WiFi Shield</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ThirdParty/WiFiShield/WiFiLanding/">OpenBCI WiFi</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ThirdParty/WiFiShield/WiFiProgam/">Wifi Shield Programming Tutorial</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ThirdParty/WiFiShield/WiFiAPI/">OpenBCI WiFi Shield API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ThirdParty/WiFiShield/WiFiSDK/">OpenBCI Wifi SDK</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Software</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Software/SoftwareLanding/">Compatible Software</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Developed By OpenBCI</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Software/OpenBCISoftware/GUIDocs/">The OpenBCI GUI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Software/OpenBCISoftware/GUIWidgets/">GUI Widget Guide</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Compatible Third Party Software</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Software/CompatibleThirdPartySoftware/Matlab/">MATLAB</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Software/CompatibleThirdPartySoftware/Neuromore/">Neuromore</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Software/CompatibleThirdPartySoftware/OpenVibe/">OpenViBE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Software/CompatibleThirdPartySoftware/LSL/">Lab Streaming Layer (LSL)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Software/CompatibleThirdPartySoftware/BrainBay/">BrainBay</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Software/CompatibleThirdPartySoftware/BioEra/">BioEra</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Software/CompatibleThirdPartySoftware/VirtualBox/">VirtualBox Windows Guide</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">For Developers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ForDevelopers/ForDevelopersLanding/">For Developers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ForDevelopers/SoftwareDevelopment/">Software Development</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ForDevelopers/FirmwareDevelopment/">Firmware Development</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ForDevelopers/HardwareDevelopment/">Hardware Development</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deprecated Documents</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Deprecated/DeprecatedLanding/">Deprecated Docs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Deprecated/SpiderclawDep/">Spiderclaw V1 &amp; V2 (deprecated)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Deprecated/8bitBoardDep/">OpenBCI 8bit Board (no longer in production)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Deprecated/UltracortexMark1Dep/">Ultracortex Mark 1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Deprecated/UltracortexMark2Dep/">Ultracortex Mark 2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Deprecated/UltracortexMark2Dep/">Ultracortex Mark 2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Deprecated/UltracortexMark3_NovaDep/">Ultracortex Mark III Nova and Supernova</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Deprecated/MarkIII/">Ultracortex Mark III</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Deprecated/Python/">Python and OpenBCI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Deprecated/Hub/">OpenBCI Hub</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Troubleshooting/TroubleshootingLanding/">Troubleshooting Landing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Troubleshooting/minimizingNoise/">Minimizing Noise</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Troubleshooting/GUI_Troubleshooting/">GUI Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Troubleshooting/FTDI_Fix_Linux/">FTDI Buffer Fix on Linux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Troubleshooting/FTDI_Fix_Mac/">FTDI Buffer Fix on OS X</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Troubleshooting/FTDI_Fix_Windows/">FTDI Buffer Fix on Windows</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Example Projects</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Examples/ExamplesLanding/">Example Projects</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Experiments</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Examples/VideoExperiment/">Puppies and Kittens Experiment</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Community Page Projects</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Examples/CommunityPageProjects/">Community Page Projects</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">EMG Projects and Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Examples/EMGProjects/EMGscrolling/">EMG Scrolling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Examples/EMGProjects/EMGmusic/">EMG controlled Music</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Examples/EMGProjects/EMGslideshow/">EMG-controlled Slideshow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Examples/EMGProjects/EMG_LED/">EMG-controlled LED</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Examples/EMGProjects/EMG_Chrome_Dino_Game/">EMG Chrome Dino Game</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Examples/EMGProjects/EMG_Tetris/">EMG-controlled Tetris</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">EEG Projects and Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Examples/EEGProjects/FocusArduino/">Send Focus Data from GUI to Arduino</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Examples/EEGProjects/MotorImagery/">Motor Imagery</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">FAQ</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">FAQ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/FAQ/FAQLanding/">Frequently Asked Questions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/FAQ/GenFAQ/">General Frequently Asked Questions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/FAQ/HowProductsGoTogether/">How OpenBCI products go together?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/FAQ/HardFAQ/">Hardware &amp; Software</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/FAQ/PaymentFAQ/">Purchases &amp; Payment Processing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/FAQ/ShippingFAQ/">Shipping &amp; Taxes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/FAQ/DocsUpdate/">Docs Website Update</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Policies</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/FAQ/Cookie/">OpenBCI Cookie Policy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/FAQ/Privacy/">Privacy &amp; Security</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/FAQ/Returns/">RETURNS &amp; REFUNDS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/FAQ/Liability/">Liability Policy</a></li></ul></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="markdown"><header><h1 class="h1Heading_dC7a">Ganglion Data Format</h1></header><p>This discussion of the OpenBCI data format only applies to the OpenBCI Ganglion. The Ganglion contains a Simblee microcontroller that can both be programmed through the Arduino IDE or over-the-air (OTA). The Simblee has an on-board radio module. The format of the Ganglion data as seen on the PC is defined by a combination of the Arduino code on the Ganglion board and software on your computer. So, if you don&#x27;t like the data format defined here, feel free to change it! In general, and believe us, we tried, you can&#x27;t send more then 100 BLE packets per second. For more info on the byte stream parsing on the computer side, or for a working example, see the <a href="https://github.com/openbci-archive/OpenBCI_NodeJS_Ganglion" target="_blank" rel="noopener noreferrer">NodeJS Ganglion Driver</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="standard-bluetooth-4n-ble-setup"></a>Standard Bluetooth 4.n BLE Setup<a class="hash-link" href="#standard-bluetooth-4n-ble-setup" title="Direct link to heading">#</a></h2><p>OpenBCI Ganglion uses a standard Bluetooth 4.n (BLE) connection. Allowing connection to any BLE compatible device!</p><p>All BLE devices have specific <em>Service</em>, <em>Receive</em>, <em>Send</em>, and <em>Disconnect</em>, the ones for Simblee are:  </p><table><thead><tr><th>Service</th><th>Value</th></tr></thead><tbody><tr><td><strong>Service</strong></td><td><code>fe84</code></td></tr><tr><td><strong>Receive</strong></td><td><code>2d30c082f39f4ce6923f3484ea480596</code></td></tr><tr><td><strong>Send</strong></td><td><code>2d30c083f39f4ce6923f3484ea480596</code></td></tr><tr><td><strong>Disconnect</strong></td><td><code>2d30c084f39f4ce6923f3484ea480596</code></td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="startup"></a>Startup<a class="hash-link" href="#startup" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="ganglion-board"></a><strong>Ganglion Board</strong><a class="hash-link" href="#ganglion-board" title="Direct link to heading">#</a></h3><p>The Ganglion does go through a reset cycle when its BLE connection is opened. Because of this, it&#x27;s <em>NOT</em> possible to connect/disconnect from the Ganglion mid stream.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="initiating-binary-transfer"></a>Initiating Binary Transfer<a class="hash-link" href="#initiating-binary-transfer" title="Direct link to heading">#</a></h2><p>Once the Ganglion has initialized itself with a BLE connection it waits for commands. It sends no data until it is told to start sending data. To begin data transfer, transmit a single ASCII <code>b</code>. Once the <code>b</code> is received, continuous transfer of data in binary format will ensue. To turn off the fire hose, send an <code>s</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="binary-format"></a>Binary Format<a class="hash-link" href="#binary-format" title="Direct link to heading">#</a></h2><p>Each packet contains a Byte ID followed by 19-bytes of data for a grand total of 20-bytes. The Byte ID determines how the receiving software or driver should parse the following 19-bytes of data. The Ganglion board samples biosignals at 200Hz. Because of the BLE 100Hz packet transmission restriction, we introduced a delta compression protocol. Grab a notebook, and get ready to have some fun! Here are details on the format.</p><p>Once you&#x27;ve established a connection to the Simblee on your Ganglion using the Simblee characteristics, it&#x27;s time to get the data!</p><p>The Ganglion data samples are 24-bit signed (2&#x27;s complement), MSB first. If we did not compress the data, we could only fit one sample on each BLE packet because 24-bits is 3-bytes times 4 samples for each channel comes to 12-bytes, which would lead to a max sample rate of 100Hz, remember upper limit of consistent BLE transmission is somewhere around 100 packets per second. Therefore we aimed to get two samples per packet, which gives a real time 200Hz streaming sample rate! Pretty cool, here is how we did it:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="19bit-compression"></a>19bit Compression<a class="hash-link" href="#19bit-compression" title="Direct link to heading">#</a></h3><p><img alt="19bit Packet Map" src="/assets/images/ganglion_19bit-packet-map-dc5abec9c3a78dcd09086a595cd734d3.png"></p><p>By default we use a 19-bit delta compression. See below for the story about 18bit delta compression description. It&#x27;s easiest to grok this compression scheme if we step through the process. Assume that the Ganglion is connected to a computer, and the user wants to start streaming data. The user (or controlling software) sends a <code>b</code>, and when the Ganglion receives the <code>b</code>, it turns on the data acquisition hardware, starts taking samples, and sending data in 20 byte packets. The very first byte of each sample is the <code>Packet ID</code>, and the very first packet sent starts with an ID of <code>0x00</code>. The value <code>0x00</code> indicates to the controlling software that the packet contains <strong>Uncompressed Data</strong>, that is, there are 4 24bit values taking up the 12 bytes following the packet ID associated with channel 1-4 respectively. These values are legit Ganglion data, and are used to seed the decompression algorithm on the computer. The Ganglion stores the values in an array called <code>lastChannelData[]</code>.<br>
<strong>NOTE:</strong> You can find all of this code in our <a href="https://github.com/OpenBCI/OpenBCI_Ganglion_Library" target="_blank" rel="noopener noreferrer">Ganglion Library</a> repository.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">void OpenBCI_Ganglion::compressData19() {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      int deltas[4];</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      int even = sampleCounter % 2;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      for (int i = 0; i &lt; 4; i++) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        deltas[i] = lastChannelData[i] - channelData[i];  // subtract new from old</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        lastChannelData[i] = channelData[i];  // keep track of the previous value</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        bitWrite(deltas[i], 0, (bitRead(deltas[i], 31))); // store the sign bit in bit0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      if (even == 1) { // pack odd samples first</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][0] = ((deltas[0] &amp; 0x0007F800) &gt;&gt; 11);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][1] = ((deltas[0] &amp; 0x000007F8) &gt;&gt; 3);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][2] = ((deltas[0] &amp; 0x00000007) &lt;! 5);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][2] |= ((deltas[1] &amp; 0x0007C000) &gt;&gt; 14);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][3] = ((deltas[1] &amp; 0x00003FC0) &gt;&gt; 6);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][4] = ((deltas[1] &amp; 0x0000003F) &lt;! 2);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][4] |= ((deltas[2] &amp; 0x00060000) &gt;&gt; 17);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][5] = ((deltas[2] &amp; 0x0001FE00) &gt;&gt; 9);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][6] = ((deltas[2] &amp; 0x000001FE) &gt;&gt; 1);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][7] = ((deltas[2] &amp; 00000001) &lt;! 7);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][7] |= ((deltas[3] &amp; 0x0007F000) &gt;&gt; 12);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][8] = ((deltas[3] &amp; 0x00000FF0) &gt;&gt; 4);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][9] = ((deltas[3] &amp; 0x0000000F) &lt;! 4);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      } else {       // pack even samples second</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][9] |= ((deltas[0] &amp; 0x00078000) &gt;&gt; 15);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][10] = ((deltas[0] &amp; 0x00007F80) &gt;&gt; 7);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][11] = ((deltas[0] &amp; 0x0000007F) &lt;! 1);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][11] |= ((deltas[1] &amp; 0x00040000) &gt;&gt; 18);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][12] = ((deltas[1] &amp; 0x0003FC00) &gt;&gt; 10);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][13] = ((deltas[1] &amp; 0x000003FC) &gt;&gt; 2);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][14] = ((deltas[1] &amp; 0x00000003) &lt;! 6);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][14] |= ((deltas[2] &amp; 0x0007E000) &gt;&gt; 13);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][15] = ((deltas[2] &amp; 0x00001FE0) &gt;&gt; 5);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][16] = ((deltas[2] &amp; 0x0000001F) &lt;! 3);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][16] |= ((deltas[3] &amp; 0x00070000) &gt;&gt; 16);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][17] = ((deltas[3] &amp; 0x0000FF00) &gt;&gt; 8);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][18] = (deltas[3] &amp; 0x000000FF);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        sendCompressedPacket19(); // send on the even packet</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>5mS later, the Ganglion will acquire another set of 4 data samples. Since the previous sample was sample <code>0</code>, this one is sample <code>1</code>. In this compression scheme, odd samples are not sent. What we do instead is we subtract these new channel values from the values contained in the <code>lastChannelData[]</code> array. The result is the <code>delta</code> that we want to send. In this case, we can&#x27;t send all 24 bits, so instead we only send the 19 LSBs of each <code>delta</code>. One thing we have to keep track of when we do this, is the sign of the number (is it a negative, or positive going difference). We do this by moving the sign bit from subtraction result into the <code>bit 0</code> position. Yes, that means that we lose one bit of resolution! The deltas are shoved into the next 9.5 bytes of the BLE packet, as shown in the code to the right. The next sample acquired is sample <code>2</code>, and the same process of deriving deltas, retaining the sign bit, and shoving the resulting 19bit values ensues, but this time after we finish packing the deltas, we send the complete packet to the BLE radio. The code to the right shows how we pack each delta into the BLE packet. Each packet sent with 19bit compression uses a <code>Packet ID</code> in the range of 101 to 200. Then, the Ganglion sends an uncompressed packet with the <code>Packet ID</code> of <code>0x00</code>. That means that once per second, the Ganglion will send a raw, or uncompressed data packet. If for some reason a packet gets dropped or there is some other issue with maintaining data integrity, a brand new fresh 100% real uncompressed data packet is less than a second away!</p><p><strong>NOTE:</strong> All delta compressions start with a raw uncompressed packet with Byte Id of <code>0x00</code>, that&#x27;s 12 bytes of uncompressed 24-bit signed integer samples. The Ganglion uses a 2D buffer called <code>compression-ring</code> to hold the BLE packets. This buffer is 101 packets big, meaning that it can hold up to the last minute of data. We hope to add the future feature of being able to recall dropped packets.</p><p><strong>IMPORTANT!</strong> 18-bit and 19-bit compression store the signed bit in the <code>bit 0</code> or LSB position! Negative numbers always have a <code>1</code> in the LSB and positive numbers always have <code>0</code> in the LSB. If we kept the signed bit in the MSB, we would lose half of our dynamic range (bad), by placing it in the LSB, we lose a nominal rounding error.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="18bit-compression"></a>18bit Compression<a class="hash-link" href="#18bit-compression" title="Direct link to heading">#</a></h3><p><img alt="18bit Packet Map" src="/assets/images/ganglion_18bit-packet-map-f88498155ebe23abc3b4f39e46cbcfe2.png"></p><p>19bit compression does not leave any room for additional data. If we want to send the on-board accelerometer data, we need to squeeze our compressor a bit more. In the case of the 18bit compressor, we also use the <code>Packet ID</code> of <code>0x00</code> to send the raw uncompressed data. Each following packet uses <code>Packet ID</code> 1 to 100. This way, the controlling software that is running the decompression algorithm can decompress each packet without having to &#x27;know&#x27; what state the system is in.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">void OpenBCI_Ganglion::compressData18() {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      int deltas[4];</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      int even = sampleCounter % 2;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      for (int i = 0; i &lt; 4; i++) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        deltas[i] = lastChannelData[i] - channelData[i];  // subtract new from old</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        lastChannelData[i] = channelData[i];  // keep track of the previous value</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        bitWrite(deltas[i], 0, (bitRead(deltas[i], 31))); // store the sign bit in bit0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      if (even == 1) { // pack odd samples first</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][0] = ((deltas[0] &amp;  0x0003FC00) &gt;&gt; 10);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][1] = ((deltas[0] &amp;  0x000003FC) &gt;&gt; 2);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][2] = ((deltas[0] &amp;  0x00000003) &lt;! 6);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][2] |= ((deltas[1] &amp; 0x0003F000) &gt;&gt; 12);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][3] = ((deltas[1] &amp;  0x00000FF0) &gt;&gt; 4);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][4] = ((deltas[1] &amp;  0x0000000F) &lt;! 4);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][4] |= ((deltas[2] &amp; 0x0003C000) &gt;&gt; 14);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][5] = ((deltas[2] &amp;  0x00003FC0) &gt;&gt; 6);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][6] = ((deltas[2] &amp;  0x0000003F) &lt;! 2);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][6] |= ((deltas[3] &amp; 0x00030000) &gt;&gt; 16);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][7] = ((deltas[3] &amp;  0x0000FF00) &gt;&gt; 8);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][8] = (deltas[3] &amp;   0x000000FF);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      } else {       // pack even samples second</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][9] = ((deltas[0] &amp;   0x0003FC00) &gt;&gt; 10);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][10] = ((deltas[0] &amp;  0x000003FC) &gt;&gt; 2);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][11] = ((deltas[0] &amp;  0x00000003) &lt;! 6);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][11] |= ((deltas[1] &amp; 0x0003F000) &gt;&gt; 12);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][12] = ((deltas[1] &amp;  0x00000FF0) &gt;&gt; 4);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][13] = ((deltas[1] &amp;  0x0000000F) &lt;! 4);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][13] |= ((deltas[2] &amp; 0x0003C000) &gt;&gt; 14);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][14] = ((deltas[2] &amp;  0x00003FC0) &gt;&gt; 6);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][15] = ((deltas[2] &amp;  0x0000003F) &lt;! 2);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][15] |= ((deltas[3] &amp; 0x00030000) &gt;&gt; 16);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][16] = ((deltas[3] &amp;  0x0000FF00) &gt;&gt; 8);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        compression_ring[ringBufferLevel][17] = (deltas[3] &amp;   0x000000FF);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        sendCompressedPacket18(); // send on the even packet</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>When the accelerometer is running, the default accelerometer sample rate is 10Hz. The Ganglion will acquire the accelerometer data whenever it is ready, but it will only send the values on with specific <code>Packet ID</code> header.  </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">void OpenBCI_Ganglion::sendCompressedPacket18() {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      radioBuffer[0] = ringBufferLevel;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      for (int i = 0; i &lt; 18; i++) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        radioBuffer[i+1] = compression_ring[ringBufferLevel][i];</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      if(useAccel){</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if(ringBufferLevel%10 == 1){ radioBuffer[19] = axisData[0]; }  // x axis</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if(ringBufferLevel%10 == 2){ radioBuffer[19] = axisData[1]; }  // y axis</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if(ringBufferLevel%10 == 3){ radioBuffer[19] = axisData[2]; }  // z axis</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      } else if(useAux){</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if(ringBufferLevel%10 == 1){ radioBuffer[19] = auxData[0]; }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if(ringBufferLevel%10 == 2){ radioBuffer[19] = auxData[1]; }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if(ringBufferLevel%10 == 3){ radioBuffer[19] = auxData[2]; }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ringBufferLevel++;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      if (BLEconnected) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        SimbleeBLE.send(radioBuffer, 20);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>We use the number associated with the <code>compression_ring</code> buffer position to tell when to send the <code>x</code>, <code>y</code> and <code>z</code> axis values. When sending 18bit compressed packets, the accelerometer data can be found in <code>Packet ID</code> numbers ending it <code>1</code>, <code>2</code>, and <code>3</code>.<br>
<strong>NOTE</strong> that the Ganglion also has the capacity to send user defined <code>auxData</code> in the place of accelerometer data.<br>
<strong>NOTE</strong> An <code>n</code> ASCII command is used to turn on the Ganglion accelerometer. Use an <code>N</code> to turn off the accelerometer.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="impedance-testing"></a>Impedance Testing<a class="hash-link" href="#impedance-testing" title="Direct link to heading">#</a></h2><p>The Ganglion has hardware in place that allows for testing the impedance of the electrode/skin contact. In order to do this, the controlling software uses the ASCII control bytes <code>z</code> to start impedance test and <code>Z</code> to stop impedance test. During impedance testing, the data stream is turned off. The Ganglion will send impedance values of all the channels, 1 to 4, and the <code>REF</code> input in series over and over until it receives a <code>Z</code>. The <code>Packet ID</code> values are listed in the chart below. The impedance data is sent as an ASCII string representing the measured value in ohms.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="verbose-prints"></a>Verbose Prints<a class="hash-link" href="#verbose-prints" title="Direct link to heading">#</a></h2><p>The Ganglion will sometimes send verbose data over the BLE connection. In this case, Ganglion can send from 1 to many packets of verbose ASCII data. The <code>Packet ID</code> for ASCII messaging will inform the computer if the message is not done and it should expect another packet <code>206</code> or <code>0xCE</code>. When Ganglion is sending the last ASCII message packet, the <code>Packet ID</code> will be <code>207</code> or <code>0xCF</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="packet-id-cheat-sheet"></a>Packet ID Cheat Sheet<a class="hash-link" href="#packet-id-cheat-sheet" title="Direct link to heading">#</a></h2><table><thead><tr><th>Byte ID Decimal</th><th>Byte ID HEX</th><th>Data Type</th><th>Description</th></tr></thead><tbody><tr><td><code>0</code></td><td><code>00</code></td><td><code>24bit</code></td><td>Raw uncompressed</td></tr><tr><td><code>1</code>-<code>100</code></td><td><code>0x01</code>-<code>0x64</code></td><td><code>18bit</code></td><td>18-bit compression with Accelerometer</td></tr><tr><td><code>101</code>-<code>200</code></td><td><code>0x65</code>-<code>0xC8</code></td><td><code>19bit</code></td><td>19-bit compression without Accelerometer</td></tr><tr><td><code>201</code></td><td><code>0xC9</code></td><td><code>impedance</code></td><td>Impedance Channel 1</td></tr><tr><td><code>202</code></td><td><code>0xCA</code></td><td><code>impedance</code></td><td>Impedance Channel 2</td></tr><tr><td><code>203</code></td><td><code>0xCB</code></td><td><code>impedance</code></td><td>Impedance Channel 3</td></tr><tr><td><code>204</code></td><td><code>0xCC</code></td><td><code>impedance</code></td><td>Impedance Channel 4</td></tr><tr><td><code>205</code></td><td><code>0xCD</code></td><td><code>impedance</code></td><td>Impedance Channel Reference</td></tr><tr><td><code>206</code></td><td><code>0xCE</code></td><td><code>multi</code></td><td>Part of ASCII message</td></tr><tr><td><code>207</code></td><td><code>0xCF</code></td><td><code>multiStop</code></td><td>End of ASCII message</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="example-interpreting-ganglion-data"></a>Example Interpreting Ganglion Data<a class="hash-link" href="#example-interpreting-ganglion-data" title="Direct link to heading">#</a></h2><p><strong>24bit</strong></p><p>Raw uncompressed is always saved. If you get a Byte ID of <code>0</code>, you&#x27;re going to want to save that.</p><p><strong>18bit</strong></p><p>Let&#x27;s take a practical example by looking at the automated test used in the <a href="https://github.com/openbci-archive/OpenBCI_NodeJS_Ganglion/blob/master/test/openBCIGanglionSample-test.js" target="_blank" rel="noopener noreferrer">Ganglion NodeJS driver</a> to approach explaining 18-bit delta compression strategy.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">let buffer = new Buffer(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000001, // 0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 2</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 3</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 4</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00100000, // 5</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 6</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00101000, // 7</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 8</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000100, // 9</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b10000000, // 10</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 11</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b10111100, // 12</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 13</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000111, // 14</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 15</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00101000, // 16</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b11000000, // 17</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00001010, // 18</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00001110  // 19</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">]);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">let expectedValue = [[0, 2, 10, 4], [131074, 245760, 114698, 49162]];</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The first compressed channel in sample one would be derived from the first two bytes plus the first two bits of the third byte:
Channel 1 - Sample 1 - <code>0b000000000000000000</code> - or <code>0</code> in decimal.</p><p>The second compressed channel in sample one would be derived from the last six bits of byte three, all of byte four, and the first four bits of byte five:
Channel 2 - Sample 1 - <code>0b000000000000000010</code> - or <code>2</code> in decimal.</p><p>The third compressed sample in sample two would be derived from the last four bits of byte 14, all of byte 15, and the first six bits of byte 16:
Channel 3 - Sample 2 - <code>0b011100000000001010</code> - or <code>114698</code> in decimal.</p><p>To get 10Hz 8-bit accelerometer data out of 18-bit packets you must modulus 10 the Byte ID:
If (Byte ID % 10) is 1, 2, and 3 then pull the last byte to get X, Y, and Z, respectably.</p><p>In our example above, byte 19, the last byte, has a value of <code>14</code> or <code>0x0E</code> which would be stored as the X axis for this accelerometer sample.</p><p>The sample number for Sample 1 is <code>1</code> and the sample number for Sample 2 is <code>2</code>. If the Byte Id was <code>47</code>, Sample 1&#x27;s sample number is <code>93</code> and Sample 2&#x27;s sample number is <code>94</code>.</p><p>Now let&#x27;s look at some negative values!</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">let buffer = new Buffer(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000001, // 0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b11111111, // 1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b11111111, // 2</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b01111111, // 3</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b11111111, // 4</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b10111111, // 5</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b11111111, // 6</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b11100111, // 7</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b11111111, // 8</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b11110101, // 9</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 10</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000001, // 11</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b01001111, // 12</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b10001110, // 13</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00110000, // 14</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 15</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00011111, // 16</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b11110000, // 17</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000001  // 18</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">]);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">let expectedValue = [[-3, -5, -7, -11], [-262139, -198429, -262137, -4095]];</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Keep in mind we look to the LSB for the sign of the 18-bit number!</p><p>The first compressed channel in sample one would be derived from the first two bytes plus the first <strong>two</strong> bits of the third byte for a total of 19-bits:
Channel 1 - Sample 1 - <code>0b111111111111111101</code> - or <code>-3</code> in decimal.  </p><p>The second compressed channel in sample two would be derived from the last six bits of byte 12, all of byte 13 and first four bits from byte 14:
Channel 2 - Sample 2 - <code>0b001111100011100011</code> - or <code>-198429</code> in decimal. <strong>The MSB is <code>0</code>, yet this is a negative number because of the <code>1</code> in the LSB</strong></p><p><strong>19Bit</strong></p><p>Once again, let&#x27;s take a practical example by looking at the automated test used in the <a href="https://github.com/openbci-archive/OpenBCI_NodeJS_Ganglion/blob/master/test/openBCIGanglionSample-test.js" target="_blank" rel="noopener noreferrer">Ganglion NodeJS driver</a> to approach explaining 19-bit delta compression strategy.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">let buffer = new Buffer(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b01100101, // 0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 2</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 3</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 4</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00001000, // 5</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 6</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000101, // 7</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 8</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 9</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b01001000, // 10</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 11</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00001001, // 12</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b11110000, // 13</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000001, // 14</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b10110000, // 15</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 16</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00110000, // 17</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 18</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00001000  // 19</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">]);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">let expectedValue = [[0, 2, 10, 4], [262148, 507910, 393222, 8]];</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The first compressed channel in sample one would be derived from the first two bytes plus the first <strong>three</strong> bits of the third byte for a total of 19-bits:
Channel 1 - Sample 1 - <code>0b0000000000000000000</code> - or <code>0</code> in decimal.</p><p>The second compressed channel in sample two would be derived from the last bit in byte 12, all of bytes 13 and 14, and only the first two bits of byte 15:
Channel 2 - Sample 2 - <code>0b1111100000000000110</code> - or <code>507910</code> in decimal. <strong>Note: the MSB is a <code>1</code> but this number is even because the LSB is <code>0</code></strong></p><p>The sample number for Sample 1 is <code>1</code> and the sample number for Sample 2 is <code>2</code>. If the Byte Id was <code>104</code>, Sample 1&#x27;s sample number is <code>7</code> and Sample 2&#x27;s sample number is <code>8</code>.</p><p>Now let&#x27;s look at some negative values!</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">let buffer = new Buffer(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b01100101, // 0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b11111111, // 1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b11111111, // 2</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b10111111, // 3</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b11111111, // 4</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b11101111, // 5</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b11111111, // 6</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b11111100, // 7</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b11111111, // 8</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b11111111, // 9</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b01011000, // 10</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 11</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00001011, // 12</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00111110, // 13</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00111000, // 14</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b11100000, // 15</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000000, // 16</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00111111, // 17</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b11110000, // 18</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0b00000001  // 19</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">]);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">let expectedValue = [[-3, -5, -7, -11], [-262139, -198429, -262137, -4095]];</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Keep in mind we look to the LSB for the sign of the 19-bit number!</p><p>The first compressed channel in sample one would be derived from the first two bytes plus the first <strong>three</strong> bits of the third byte:
Channel 1 - Sample 1 - <code>0b1111111111111111101</code> - or <code>-3</code> in decimal.  </p><p>The forth compressed channel in sample two would be derived from the last three bits of byte 17 and all of bytes 18 and 19:
Channel 4 - Sample 2 - <code>0b001111100011100011</code> - or <code>-198429</code> in decimal. <strong>The MSB is <code>0</code>, yet this is a negative number because of the <code>1</code> in the LSB</strong></p><p><strong>impedance</strong></p><p>Impedance values are sent with Byte IDs and are in ASCII format ending with a <code>Z</code>. Parse from byte 1 till you hit the <code>Z</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="18-bit-signed-data-values"></a>18-Bit Signed Data Values<a class="hash-link" href="#18-bit-signed-data-values" title="Direct link to heading">#</a></h2><p>For the compressed EEG data values, you will note that we are transferring the data as a 18-bit signed integer, which is a bit unusual. We are using this number format because it is the native format used by the A/D chip that is at the core of the Ganglion board. To convert this unusual number format into a more standard 32-bit signed integer, you can steal some ideas from the example NodeJS (aka, JavaScript) code:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * Converts a special ganglion 18 bit compressed number</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> *  The compressions uses the LSB, bit 1, as the signed bit, instead of using</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> *  the MSB. Therefore you must not look to the MSB for a sign extension, one</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> *  must look to the LSB, and the same rules applies, if it&#x27;s a 1, then it&#x27;s a</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> *  negative and if it&#x27;s 0 then it&#x27;s a positive number.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * @param threeByteBuffer {Buffer}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> *  A 3-byte buffer with only 18 bits of actual data.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * @return {number} A signed integer.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function convert18bitAsInt32 (threeByteBuffer) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let prefix = 0;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  if (threeByteBuffer[2] &amp; 0x01 &gt; 0) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // console.log(&#x27;\t\tNegative number&#x27;)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    prefix = 0b11111111111111;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  return (prefix &lt;! 18) | (threeByteBuffer[0] &lt;! 16) | (threeByteBuffer[1] &lt;! 8) | threeByteBuffer[2];</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="19-bit-signed-data-values"></a>19-Bit Signed Data Values<a class="hash-link" href="#19-bit-signed-data-values" title="Direct link to heading">#</a></h2><p>For the compressed EEG data values, you will note that we are transferring the data as a 19-bit signed integer, which is a bit unusual. We are using this number format because it is the native format used by the A/D chip that is at the core of the Ganglion board. To convert this unusual number format into a more standard 32-bit signed integer, you can steal some ideas from the example NodeJS (aka, JavaScript) code:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * Converts a special ganglion 19 bit compressed number</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> *  The compressions uses the LSB, bit 1, as the signed bit, instead of using</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> *  the MSB. Therefore you must not look to the MSB for a sign extension, one</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> *  must look to the LSB, and the same rules applies, if it&#x27;s a 1, then it&#x27;s a</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> *  negative and if it&#x27;s 0 then it&#x27;s a positive number.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * @param threeByteBuffer {Buffer}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> *  A 3-byte buffer with only 19 bits of actual data.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * @return {number} A signed integer.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function convert19bitAsInt32 (threeByteBuffer) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let prefix = 0;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  if (threeByteBuffer[2] &amp; 0x01 &gt; 0) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // console.log(&#x27;\t\tNegative number&#x27;)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    prefix = 0b1111111111111;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  return (prefix &lt;! 19) | (threeByteBuffer[0] &lt;! 16) | (threeByteBuffer[1] &lt;! 8) | threeByteBuffer[2];</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="interpreting-the-eeg-data"></a>Interpreting the EEG Data<a class="hash-link" href="#interpreting-the-eeg-data" title="Direct link to heading">#</a></h2><p>Once you receive and parse and decompress the data packets, it is important to know how to interpret the data so that the EEG values are useful in a quantitative way. The critical piece of information is the scale factor.</p><p>For the scale factor, this is the multiplier that you use to convert the EEG values from â€œcountsâ€ (the int32 number that you parse from the binary stream) into scientific units like â€œvoltsâ€. Scale factor is set and baked into the hardware, therefore use a scale factor of:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Scale Factor (Volts/count) = 1.2 Volts * 8388607.0 * 1.5 * 51.0;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This equation is from the MCP3912 data sheet, specifically it is from the text surrounding Table 7. This scale factor has also been confirmed experimentally using known calibration signals.</p><p>Accelerometer data must also be scaled before it can be correctly interpreted. The equation used to scale Accelerometer data is as follows (We assume 4Gs, so 2mG per digit):</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Accelerometer Scale Factor = 0.032;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/OpenBCI/Documentation/edit/master/website/docs/Ganglion/08-Ganglion_Data_Format.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_wj+Z">Last updated on <b><time datetime="2021-07-27T17:06:14.000Z">7/27/2021</time></b></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Ganglion/GanglionSpecs/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Ganglion Specs</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Ganglion/GanglionSDK/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Ganglion SDK Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#standard-bluetooth-4n-ble-setup" class="table-of-contents__link">Standard Bluetooth 4.n BLE Setup</a></li><li><a href="#startup" class="table-of-contents__link">Startup</a><ul><li><a href="#ganglion-board" class="table-of-contents__link"><strong>Ganglion Board</strong></a></li></ul></li><li><a href="#initiating-binary-transfer" class="table-of-contents__link">Initiating Binary Transfer</a></li><li><a href="#binary-format" class="table-of-contents__link">Binary Format</a><ul><li><a href="#19bit-compression" class="table-of-contents__link">19bit Compression</a></li><li><a href="#18bit-compression" class="table-of-contents__link">18bit Compression</a></li></ul></li><li><a href="#impedance-testing" class="table-of-contents__link">Impedance Testing</a></li><li><a href="#verbose-prints" class="table-of-contents__link">Verbose Prints</a></li><li><a href="#packet-id-cheat-sheet" class="table-of-contents__link">Packet ID Cheat Sheet</a></li><li><a href="#example-interpreting-ganglion-data" class="table-of-contents__link">Example Interpreting Ganglion Data</a></li><li><a href="#18-bit-signed-data-values" class="table-of-contents__link">18-Bit Signed Data Values</a></li><li><a href="#19-bit-signed-data-values" class="table-of-contents__link">19-Bit Signed Data Values</a></li><li><a href="#interpreting-the-eeg-data" class="table-of-contents__link">Interpreting the EEG Data</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/open-bci-gear-blue.svg" alt="" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="/img/open-bci-gear-blue.svg" alt="" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></div><div class="footer__copyright">Copyright Â© 2021 OpenBCI</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9670d3ec.js"></script>
<script src="/assets/js/main.494a30fe.js"></script>
</body>
</html>