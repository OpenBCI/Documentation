"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1572],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var n=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(a),u=o,m=c["".concat(s,".").concat(u)]||c[u]||h[u]||r;return a?n.createElement(m,i(i({ref:t},d),{},{components:a})):n.createElement(m,i({ref:t},d))}));function m(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:o,i[1]=l;for(var p=2;p<r;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},28778:(e,t,a)=>{a.r(t),a.d(t,{contentTitle:()=>s,default:()=>u,frontMatter:()=>l,metadata:()=>p,toc:()=>d});var n=a(87462),o=a(63366),r=(a(67294),a(3905)),i=["components"],l={id:"NeuroFly_Toolkit",title:"NeuroFly Toolkit"},s=void 0,p={unversionedId:"Software/OpenBCISoftware/NeuroFly_Toolkit",id:"Software/OpenBCISoftware/NeuroFly_Toolkit",title:"NeuroFly Toolkit",description:"This tutorial will show you how to control a joystick using EMG data with the OpenBCI GUI. You can then use this customizable, muscle-activated joystick for any purpose of your choosing! OpenBCI used this to control a drone in the 2023 OpenBCI TED Talk.",source:"@site/docs/Software/OpenBCISoftware/NeuroFly_Toolkit.md",sourceDirName:"Software/OpenBCISoftware",slug:"/Software/OpenBCISoftware/NeuroFly_Toolkit",permalink:"/Software/OpenBCISoftware/NeuroFly_Toolkit",editUrl:"https://github.com/OpenBCI/Documentation/edit/master/website/docs/Software/OpenBCISoftware/NeuroFly_Toolkit.md",tags:[],version:"current",lastUpdatedAt:1689635068,formattedLastUpdatedAt:"7/17/2023",frontMatter:{id:"NeuroFly_Toolkit",title:"NeuroFly Toolkit"},sidebar:"docs",previous:{title:"GUI Widget Guide",permalink:"/Software/OpenBCISoftware/GUIWidgets"},next:{title:"MATLAB",permalink:"/Software/CompatibleThirdPartySoftware/Matlab"}},d=[{value:"Materials Required",id:"materials-required",children:[],level:2},{value:"Video Walkthrough",id:"video-walkthrough",children:[],level:2},{value:"Step 1: Hardware Assembly",id:"step-1-hardware-assembly",children:[],level:2},{value:"Step 2: GUI Setup",id:"step-2-gui-setup",children:[{value:"EMG Settings",id:"emg-settings",children:[],level:3},{value:"EMG Joystick Widget",id:"emg-joystick-widget",children:[],level:3}],level:2},{value:"Step 3: Stream Data Using Networking Widget",id:"step-3-stream-data-using-networking-widget",children:[],level:2}],c={toc:d},h="wrapper";function u(e){var t=e.components,l=(0,o.Z)(e,i);return(0,r.kt)(h,(0,n.Z)({},c,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This tutorial will show you how to control a joystick using EMG data with the OpenBCI GUI. You can then use this customizable, muscle-activated joystick for any purpose of your choosing! OpenBCI used this to control a drone in the 2023 OpenBCI TED Talk."),(0,r.kt)("h2",{id:"materials-required"},"Materials Required"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"OpenBCI ",(0,r.kt)("a",{parentName:"li",href:"https://shop.openbci.com/collections/frontpage/products/cyton-biosensing-board-8-channel?variant=38958638542"},"Cyton Board")," or ",(0,r.kt)("a",{parentName:"li",href:"https://shop.openbci.com/products/ganglion-board"},"Ganglion Board")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://shop.openbci.com/products/kendall-emg-ecg-foam-solid-gel-electrodes-30-pack"},"Disposable gel electrodes")," or ",(0,r.kt)("a",{parentName:"li",href:"https://shop.openbci.com/collections/frontpage/products/idun-dryode-kit"},"IDUN Dryode")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://shop.openbci.com/collections/frontpage/products/emg-ecg-snap-electrode-cables?variant=32372786958"},"EMG/ECG Snap Electrode Cables")),(0,r.kt)("li",{parentName:"ol"},"Computer with downloaded ",(0,r.kt)("a",{parentName:"li",href:"/Software/OpenBCISoftware/GUIDocs"},"OpenBCI GUI"),". ",(0,r.kt)("strong",{parentName:"li"},"Be sure to use ",(0,r.kt)("a",{parentName:"strong",href:"https://github.com/OpenBCI/OpenBCI_GUI/releases/latest"},"OpenBCI GUI v5.2.0")," or later"),".")),(0,r.kt)("h2",{id:"video-walkthrough"},"Video Walkthrough"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=fYHwCLIIkJY"},"NeuroFly by OpenBCI - How it works")),(0,r.kt)("h2",{id:"step-1-hardware-assembly"},"Step 1: Hardware Assembly"),(0,r.kt)("p",null,"Follow the ",(0,r.kt)("a",{parentName:"p",href:"/GettingStarted/Biosensing-Setups/EMGSetup"},"EMG Getting Started tutorial")," to connect the electrodes to your body and the Cyton board. We will read data from the Cyton using the OpenBCI GUI. For this tutorial, you will need to connect up to four channels. The number of channels depends on how many degrees of freedom are needed. Four channels will enable control of both positive and negative X/Y directions of the joystick. Only one ground is needed."),(0,r.kt)("p",null,"Here is a mapping of channel numbers to X/Y joystick directions:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Channel"),(0,r.kt)("th",{parentName:"tr",align:null},"Direction"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"- X (left)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"2"),(0,r.kt)("td",{parentName:"tr",align:null},"+ X (right)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"3"),(0,r.kt)("td",{parentName:"tr",align:null},"+ Y (up)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"4"),(0,r.kt)("td",{parentName:"tr",align:null},"- Y (down)")))),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The most complex part of this tutorial will be finding the right placement for each pair of electrodes. It is important to find the muscle locations that are the easiest for the user to precisely control. You may need to play around with different locations before finding your optimal electrode setup."))),(0,r.kt)("h2",{id:"step-2-gui-setup"},"Step 2: GUI Setup"),(0,r.kt)("p",null,"Start by streaming data using the GUI. Follow this ",(0,r.kt)("a",{parentName:"p",href:"/Software/OpenBCISoftware/GUIDocs/#using-the-openbci-gui"},"getting started tutorial")," to get the board streaming. You will need to open the EMG Joystick and EMG Settings widgets."),(0,r.kt)("h3",{id:"emg-settings"},"EMG Settings"),(0,r.kt)("p",null,"This widget contains the tuneable parameters used for the threshold algorithm that determines how active each channel is. The output value is a normalized value, from 0 to 1, mapped between the lower threshold and upper threshold."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"EMG Settings Screenshot",src:a(85889).Z})),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Definition"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Smooth"),(0,r.kt)("td",{parentName:"tr",align:null},"This is the size of the window. If we set this value at the smallest setting of 0.01 seconds (ie., lowering the smooth value), our data will be very jittery but responsive. Alternatively, if we increase the smooth and set our window to 2.0 seconds, the output will be very smooth but much less responsive. This reduces the effect of outliers in the dataset.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"uV Limit"),(0,r.kt)("td",{parentName:"tr",align:null},"This is a cutoff point for an allowable \u03bcV value in any individual data block. Any \u03bcV values above this number will be chopped off and set to this upper \u03bcV limit. This is to prevent erratic blips in the data from substantially distorting the average. Sometimes dropped packets and rapid body movements can create large spikes that don\u2019t correlate to muscle activity. This helps account for those issues.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Creep+"),(0,r.kt)("td",{parentName:"tr",align:null},"This value indicates how quickly the upper \u03bcV threshold creeps downward. Notice that adjusting this value will affect how fast the the upper threshold decreases if not triggered. We generally recommend this to be slow. If this is too fast and we wait too long between muscle activations, the upper threshold will have crept too close to the lower threshold and the system will be hypersensitive.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Creep-"),(0,r.kt)("td",{parentName:"tr",align:null},"This value indicates how quickly the lower \u03bcV threshold creeps upward. Notice that adjusting this value will affect how fast the lower threshold increases if it is less than the current uV. A higher value enables easier activation, but the signal is more prone to noise. A lower value is the opposite. It is harder to activate, but the signal will be less prone to noise.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Min \u0394uV"),(0,r.kt)("td",{parentName:"tr",align:null},"This value sets the minimum voltage range between the upper threshold and the lower threshold. The upper threshold and lower threshold cannot get any closer than this. Increasing this value will result in you having to create a larger EMG signal to go from 0 to 100% activation. This is useful when your EMG signal is strong, but can make it difficult to reach 100% if your EMG signal is weak. Decreasing the value will make it easier to reach 100% activation with a weak signal, but may result in false activations when the signal is strong.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Low Limit"),(0,r.kt)("td",{parentName:"tr",align:null},"This is the minimum value the lower threshold can be. In general, this value should be set just above the noise floor so that environmental noise does not trigger false activations.")))),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"It is important to note ",(0,r.kt)("strong",{parentName:"p"},"higher creep values adjust thresholds slower and lower creep values adjust faster"),". For example, if we compare creep = 0.9 and creep = 0.999 with a previous threshold value = 100: "),(0,r.kt)("p",{parentName:"div"},"(0.9 x 100 = 90) < (0.999 x 100 = 99)"),(0,r.kt)("p",{parentName:"div"},"You can see how a lower creep value will actually decrease the value faster."))),(0,r.kt)("h3",{id:"emg-joystick-widget"},"EMG Joystick Widget"),(0,r.kt)("p",null,"This widget has an indicator that moves in the direction of the activated EMG channels. This visualization should be used in combination with the EMG settings to find your ideal EMG joystick setup."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"EMG Joystick Screenshot",src:a(13069).Z})),(0,r.kt)("h2",{id:"step-3-stream-data-using-networking-widget"},"Step 3: Stream Data Using Networking Widget"),(0,r.kt)("p",null,"Follow the ",(0,r.kt)("a",{parentName:"p",href:"/Software/OpenBCISoftware/GUIWidgets/#networking"},"Networking Tutorial")," to learn how to stream data using UDP from the GUI. For this project, you will need to stream the EMG channel data from the Networking Widget. ",(0,r.kt)("strong",{parentName:"p"},"Make sure your EMG joystick widget is open when streaming"),". Your Networking settings should look as follows:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"UDP Networking Widget Screenshot",src:a(5659).Z})),(0,r.kt)("p",null,"The EMG Joystick UDP stream will be sent to the IP address and port specified in the Networking Widget. The JSON packets will look like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{"type":"emgJoystick","data":[0.664,-0.749]}\n')),(0,r.kt)("p",null,"Here is an example of how we use the deserialized JSON messages in our NeuroFly Unity application."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-C#"},"EMGJoystickX = packet.data[0];\nEMGJoystickY = packet.data[1];\n")),(0,r.kt)("p",null,"Once your UDP stream is running, you will be able to use this EMG joystick for any use case! We are excited to see how our global Community uses this widget to create awesome projects and research!"))}u.isMDXComponent=!0},13069:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/EMG_joystick-764ddca505dee3f50aec48d9d67a7c2a.png"},85889:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/EMG_settings-ba3ec254a013da3db08581a12eb92850.png"},5659:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/UDP_drone-0370a5ea15f5db703b5bde5377068729.png"}}]);