"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2857],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>c});var r=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},d=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},k=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=p(n),k=i,c=u["".concat(s,".").concat(k)]||u[k]||m[k]||o;return n?r.createElement(c,a(a({ref:t},d),{},{components:n})):r.createElement(c,a({ref:t},d))}));function c(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=k;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:i,a[1]=l;for(var p=2;p<o;p++)a[p]=n[p];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}k.displayName="MDXCreateElement"},79053:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>c,frontMatter:()=>l,metadata:()=>p,toc:()=>u});var r=n(87462),i=n(63366),o=(n(67294),n(3905)),a=["components"],l={id:"FTDI_Fix_Mac",title:"FTDI Buffer Fix on OS X"},s=void 0,p={unversionedId:"Troubleshooting/FTDI_Fix_Mac",id:"Troubleshooting/FTDI_Fix_Mac",title:"FTDI Buffer Fix on OS X",description:"Summary",source:"@site/docs/Troubleshooting/05-FTDI_Driver_Fix_Mac.md",sourceDirName:"Troubleshooting",slug:"/Troubleshooting/FTDI_Fix_Mac",permalink:"/Troubleshooting/FTDI_Fix_Mac",draft:!1,editUrl:"https://github.com/OpenBCI/Documentation/edit/master/website/docs/Troubleshooting/05-FTDI_Driver_Fix_Mac.md",tags:[],version:"current",lastUpdatedAt:1670971024,formattedLastUpdatedAt:"Dec 13, 2022",sidebarPosition:5,frontMatter:{id:"FTDI_Fix_Mac",title:"FTDI Buffer Fix on OS X"},sidebar:"docs",previous:{title:"FTDI Buffer Fix on Linux",permalink:"/Troubleshooting/FTDI_Fix_Linux"},next:{title:"FTDI Buffer Fix on Windows",permalink:"/Troubleshooting/FTDI_Fix_Windows"}},d={},u=[{value:"Summary",id:"summary",level:2},{value:"Step 1: open Terminal",id:"step-1-open-terminal",level:3},{value:"Step 2: Remove any existing FTDI drivers &amp; reboot",id:"step-2-remove-any-existing-ftdi-drivers--reboot",level:3},{value:"Step 3: get the FTDI driver",id:"step-3-get-the-ftdi-driver",level:3},{value:"for macOS 10.9 to 10.11",id:"for-macos-109-to-1011",level:4},{value:"for macOS 10.13 and 10.14",id:"for-macos-1013-and-1014",level:4},{value:"Step 4: enable dev mode",id:"step-4-enable-dev-mode",level:3},{value:"Step 5: reboot your computer",id:"step-5-reboot-your-computer",level:3},{value:"Step 6: plug in your dongle",id:"step-6-plug-in-your-dongle",level:3},{value:"Step 7: unload the FTDI kernel extension",id:"step-7-unload-the-ftdi-kernel-extension",level:3},{value:"Step 8: make sure it&#39;s unloaded",id:"step-8-make-sure-its-unloaded",level:3},{value:"Step 9: open the Info.plist file:",id:"step-9-open-the-infoplist-file",level:3},{value:"Step 10: edit the config data",id:"step-10-edit-the-config-data",level:3},{value:"for macOS 10.9 to 10.11, using the driver 2.2.18",id:"for-macos-109-to-1011-using-the-driver-2218",level:4},{value:"for macOS 10.13 and 10.14, using the driver 2.4.2",id:"for-macos-1013-and-1014-using-the-driver-242",level:4},{value:"Step 11: save &amp; close",id:"step-11-save--close",level:3},{value:"Step 12: reload the kernel extension",id:"step-12-reload-the-kernel-extension",level:3},{value:"Step 13: make sure it&#39;s loaded",id:"step-13-make-sure-its-loaded",level:3},{value:"Step 14: enjoy smoother streaming",id:"step-14-enjoy-smoother-streaming",level:3},{value:"Helpful Resources",id:"helpful-resources",level:3}],m={toc:u},k="wrapper";function c(e){var t=e.components,l=(0,i.Z)(e,a);return(0,o.kt)(k,(0,r.Z)({},m,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"summary"},"Summary"),(0,o.kt)("admonition",{type:"important"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"p"},"The FTDI driver is only necessary for Mac OS X 10.9 through 10.15. If you are running a Mac that is mid 2015 or newer, you do not need to install the FTDI driver! The included drivers with OS X 11, 12, and 13 can handle communications with Cyton and Dongle out of the box."))),(0,o.kt)("p",null,"On some Macs, you may have noticed that the data coming from your board is very choppy."),(0,o.kt)("p",null,"This is a result of the FTDI virtual com port (VCP) driver's default settings for macOS. For more info on FTDI VCP drivers, see ",(0,o.kt)("a",{parentName:"p",href:"http://openbci.com/forum/index.php?p=/discussion/196/os-x-and-virtual-com-ports-mavericks-yosemite-note"},"this forum thread")," and the ",(0,o.kt)("a",{parentName:"p",href:"http://www.ftdichip.com/Drivers/VCP.htm"},"FTDI VCP web page"),"."),(0,o.kt)("p",null,"This document details how to edit the config data of the ",(0,o.kt)("strong",{parentName:"p"},"Info.plist")," file of your FTDI VCP driver, so that the choppiness is significantly reduced, and you are able to process the data in real-time, with minimal latency!"),(0,o.kt)("p",null,"This tutorial has been verified to work with the following macOS versions:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"10.9"),(0,o.kt)("li",{parentName:"ul"},"10.10"),(0,o.kt)("li",{parentName:"ul"},"10.11"),(0,o.kt)("li",{parentName:"ul"},"10.13"),(0,o.kt)("li",{parentName:"ul"},"10.14"),(0,o.kt)("li",{parentName:"ul"},"10.15")),(0,o.kt)("h3",{id:"step-1-open-terminal"},"Step 1: open Terminal"),(0,o.kt)("p",null,"To open Terminal, go to:"),(0,o.kt)("p",null,"/Applications/Utilities/Terminal"),(0,o.kt)("p",null,"All of the lines of code you see below you will run from the Terminal command line. If you are unfamiliar with using Terminal, check out this ",(0,o.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=yIY3iPDVUBg"},"Introduction to the Terminal in macOS")," Youtube tutorial."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"!!! WARNING !!!"))),(0,o.kt)("p",null,"Be very careful when using the ",(0,o.kt)("strong",{parentName:"p"},"sudo rm")," command. It is used to remove files from your system. Never EVER enter the following command by itself, without specifying a filepath. That will wipe your hard drive."),(0,o.kt)("p",null,"If you are new to Terminal, it is best to simply copy and paste the lines of code below into your terminal window."),(0,o.kt)("h3",{id:"step-2-remove-any-existing-ftdi-drivers--reboot"},"Step 2: Remove any existing FTDI drivers & reboot"),(0,o.kt)("p",null,"Remove the FTDI ",(0,o.kt)("a",{parentName:"p",href:"http://www.macbreaker.com/2012/01/what-are-kexts.html"},"kernel extension")," (.kext) from your machine. You might not have it installed already. If you do not, skip this step."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\nsudo rm /System/Library/Extensions/FTDIUSBSerialDriver.kext\nsudo rm -rf /Library/Extensions/FTDIUSBSerialDriver.kext\n\n")),(0,o.kt)("p",null,"After removing all existing FTDI drivers, reboot your computer."),(0,o.kt)("h3",{id:"step-3-get-the-ftdi-driver"},"Step 3: get the FTDI driver"),(0,o.kt)("h4",{id:"for-macos-109-to-1011"},"for macOS 10.9 to 10.11"),(0,o.kt)("p",null,"Download and install the FTDI Driver 2.2.18 for your processor from the ",(0,o.kt)("a",{parentName:"p",href:"http://www.ftdichip.com/Drivers/VCP.htm"},"FTDI VCP page"),". The latest FTDI VCP driver for macOS (version 2.3) does not work yet for this fix."),(0,o.kt)("p",null,"Here are the direct download links for ",(0,o.kt)("a",{parentName:"p",href:"http://www.ftdichip.com/drivers/VCP/MacOSX/FTDIUSBSerialDriver_v2_2_18.dmg"},"32-bit")," and ",(0,o.kt)("a",{parentName:"p",href:"http://www.ftdichip.com/Drivers/VCP/MacOSX/FTDIUSBSerialDriver_v2_2_18.dmg"},"64-bit")," processors. Most likely you are working with 64-bit."),(0,o.kt)("p",null,"The downloaded .dmg comes with two installers in it. ",(0,o.kt)("strong",{parentName:"p"},"FTDIUSBSerialDriver_10_3")," for OS X 10.3 and ",(0,o.kt)("strong",{parentName:"p"},"FTDIUSBSerialDriver_10_4_10_5_10_6_10_7")," for the rest. You most likely need to install ",(0,o.kt)("strong",{parentName:"p"},"FTDIUSBSerialDriver_10_4_10_5_10_6_10_7"),"."),(0,o.kt)("h4",{id:"for-macos-1013-and-1014"},"for macOS 10.13 and 10.14"),(0,o.kt)("p",null,"Download and install the FTDI Driver 2.4.2 from the ",(0,o.kt)("a",{parentName:"p",href:"http://www.ftdichip.com/Drivers/VCP.htm"},"FTDI VCP page"),"."),(0,o.kt)("h3",{id:"step-4-enable-dev-mode"},"Step 4: enable dev mode"),(0,o.kt)("p",null,"Prior to making edits to the kext file, you must enable kext dev mode and disable signature verification. For OS X 10.10 or older, you just type:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'\nsudo nvram boot-args="kext-dev-mode=1"\n\n')),(0,o.kt)("p",null,"For 10.11 or newer, you need to reboot your computer and before booting, hold the Cmd-R key. This will get you into recovery mode. From Utilities, choose Terminal and type:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\ncsrutil disable\n\n")),(0,o.kt)("p",null,"You can then close the Terminal application and reboot your computer to normal mode. You can proceed with Step 6."),(0,o.kt)("h3",{id:"step-5-reboot-your-computer"},"Step 5: reboot your computer"),(0,o.kt)("p",null,"After re-installing the FTDI driver and enabling kext dev mode, reboot your computer once more to ensure that everything has taken effect."),(0,o.kt)("h3",{id:"step-6-plug-in-your-dongle"},"Step 6: plug in your dongle"),(0,o.kt)("p",null,"Plug in your dongle and ensure that the switch is set to GPIO6 (not RESET)."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"image",src:n(43845).Z,width:"452",height:"340"})),(0,o.kt)("h3",{id:"step-7-unload-the-ftdi-kernel-extension"},"Step 7: unload the FTDI kernel extension"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\nsudo kextunload /System/Library/Extensions/FTDIUSBSerialDriver.kext\n\n")),(0,o.kt)("h3",{id:"step-8-make-sure-its-unloaded"},"Step 8: make sure it's unloaded"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\nkextstat | grep FTDI\n\n")),(0,o.kt)("p",null,"If everthing is good, nothing should print after running this command."),(0,o.kt)("h3",{id:"step-9-open-the-infoplist-file"},"Step 9: open the Info.plist file:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\nsudo emacs /System/Library/Extensions/FTDIUSBSerialDriver.kext/Contents/Info.plist\n\n")),(0,o.kt)("p",null,"or"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\nsudo vim /System/Library/Extensions/FTDIUSBSerialDriver.kext/Contents/Info.plist\n\n")),(0,o.kt)("h3",{id:"step-10-edit-the-config-data"},"Step 10: edit the config data"),(0,o.kt)("p",null,'Now add the new config data for the "FT X Series" as seen below. The "FT X Series" key is about 1/3 of the way through the Info.plist file and all of the keys are in alphabetical order. Scroll down to \'F\'!'),(0,o.kt)("h4",{id:"for-macos-109-to-1011-using-the-driver-2218"},"for macOS 10.9 to 10.11, using the driver 2.2.18"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"BEFORE")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\n<key>FT X Series</key>\n<dict>\n       <key>CFBundleIdentifier</key>\n       <string>com.FTDI.driver.FTDIUSBSerialDriver</string>\n       <key>IOClass</key>\n       <string>FTDIUSBSerialDriver</string>\n       <key>IOProviderClass</key>\n       <string>IOUSBInterface</string>\n       <key>bConfigurationValue</key>\n       <integer>1</integer>\n       <key>bInterfaceNumber</key>\n       <integer>0</integer>\n       <key>bcdDevice</key>\n       <integer>4096</integer>\n       <key>idProduct</key>\n       <integer>24597</integer>\n       <key>idVendor</key>\n       <integer>1027</integer>\n</dict>\n\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"AFTER")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\n<key>FT X Series</key>\n<dict>\n        <key>CFBundleIdentifier</key>\n        <string>com.FTDI.driver.FTDIUSBSerialDriver</string>\n        <key>IOClass</key>\n        <string>FTDIUSBSerialDriver</string>\n        <key>IOProviderClass</key>\n        <string>IOUSBInterface</string>\n        <key>bConfigurationValue</key>\n        <integer>1</integer>\n        <key>bInterfaceNumber</key>\n        <integer>0</integer>\n        <key>bcdDevice</key>\n        <integer>4096</integer>\n        <key>idProduct</key>\n        <integer>24597</integer>\n        <key>idVendor</key>\n        <integer>1027</integer>\n        <key>ConfigData</key>\n        <dict>\n          <key>PortName</key>\n          <string>OpenBCI</string>\n          <key>InBufferSize</key>\n          <integer>64</integer>\n        </dict>\n</dict>\n\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Note:")," We also rename the port name to OpenBCI because it's easier to spot if the board is connected or not."),(0,o.kt)("h4",{id:"for-macos-1013-and-1014-using-the-driver-242"},"for macOS 10.13 and 10.14, using the driver 2.4.2"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"BEFORE")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\n<key>FT X Series</key>\n<dict>\n  <key>CFBundleIdentifier</key>\n  <string>com.FTDI.driver.FTDIUSBSerialDriver</string>\n  <key>IOClass</key>\n  <string>FTDIUSBSerialDriver</string>\n  <key>IOProviderClass</key>\n  <string>IOUSBInterface</string>\n  <key>bConfigurationValue</key>\n  <integer>1</integer>\n  <key>bInterfaceNumber</key>\n  <integer>0</integer>\n  <key>bcdDevice</key>\n  <integer>4096</integer>\n  <key>idProduct</key>\n  <integer>24597</integer>\n  <key>idVendor</key>\n  <integer>1027</integer>\n</dict>\n\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"AFTER")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\n<key>FT X Series</key>\n<dict>\n  <key>CFBundleIdentifier</key>\n  <string>com.FTDI.driver.FTDIUSBSerialDriver</string>\n  <key>IOClass</key>\n  <string>FTDIUSBSerialDriver</string>\n  <key>IOProviderClass</key>\n  <string>IOUSBInterface</string>\n  <key>bConfigurationValue</key>\n  <integer>1</integer>\n  <key>bInterfaceNumber</key>\n  <integer>0</integer>\n  <key>bcdDevice</key>\n  <integer>4096</integer>\n  <key>idProduct</key>\n  <integer>24597</integer>\n  <key>idVendor</key>\n  <integer>1027</integer>\n  <key>ConfigData</key>\n  <dict>\n    <key>InBufferSize</key>\n    <integer>128</integer>\n    <key>LatencyTimer</key>\n    <integer>24</integer>\n  </dict>\n</dict>\n\n")),(0,o.kt)("h3",{id:"step-11-save--close"},"Step 11: save & close"),(0,o.kt)("p",null,"In emacs:"),(0,o.kt)("p",null,"To save:\n",(0,o.kt)("strong",{parentName:"p"},"[CTRL]"," + x"),"\nfollowed by\n",(0,o.kt)("strong",{parentName:"p"},"[CTRL]"," + s")),(0,o.kt)("p",null,"To close emacs:\n",(0,o.kt)("strong",{parentName:"p"},"[CTRL]"," + x"),"\nfollowed by\n",(0,o.kt)("strong",{parentName:"p"},"[CTRL]"," + c")),(0,o.kt)("hr",null),(0,o.kt)("p",null,"In vim:"),(0,o.kt)("p",null,"Hit the ",(0,o.kt)("strong",{parentName:"p"},"[esc]")," key to go into command mode.\nThen type ",(0,o.kt)("strong",{parentName:"p"},":wq")," to save and quit."),(0,o.kt)("h3",{id:"step-12-reload-the-kernel-extension"},"Step 12: reload the kernel extension"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\nsudo kextload /System/Library/Extensions/FTDIUSBSerialDriver.kext\n\n")),(0,o.kt)("h3",{id:"step-13-make-sure-its-loaded"},"Step 13: make sure it's loaded"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\nkextstat | grep FTDI\n\n")),(0,o.kt)("p",null,"You should get a response that looks something like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\n  145    0 0xffffff7f82dce000 0x8000     0x8000     com.FTDI.driver.FTDIUSBSerialDriver (2.2.18) <118 37 5 4 3 1>\n\n")),(0,o.kt)("h3",{id:"step-14-enjoy-smoother-streaming"},"Step 14: enjoy smoother streaming"),(0,o.kt)("p",null,"Open the OpenBCI Processing GUI (or other software), connect to your device, and begin streaming the data."),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"helpful-resources"},"Helpful Resources"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://marion.ai/koac/"},"Marion's original fix (thank you)!")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"http://www.ftdichip.com/Drivers/VCP.htm"},"FTDI VCP web page")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"http://www.macbreaker.com/2012/01/what-are-kexts.html"},"What is a .kext file?")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"http://www.ftdichip.com/Support/Documents/AppNotes/AN_134_FTDI_Drivers_Installation_Guide_for_MAC_OSX.pdf"},"FTDI Driver Installation Guide for macOS"))))}c.isMDXComponent=!0},43845:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/dongleConnection-e38cbd3519d5c35553d24d0d5acad4e3.png"}}]);